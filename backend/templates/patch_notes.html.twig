{% extends "base.html.twig" %}

{% block title %}Patch Notes Transformer{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Patch Notes Transformer</h1>

    <form method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label for="patchnote" class="block text-sm font-medium text-gray-700 mb-2">
                Raw Patch Note Text
            </label>
            <textarea
                id="patchnote"
                name="patchnote"
                rows="15"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                placeholder="Paste your patch notes here..."
            >{{ input }}</textarea>
            <button
                type="submit"
                class="mt-4 px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition"
            >
                Transform
            </button>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
                Markdown Output
            </label>
            {% if error %}
                <div class="p-4 bg-red-100 border border-red-400 text-red-700 rounded-md mb-4">
                    {{ error }}
                </div>
            {% endif %}
            {% if output %}
                <pre class="w-full h-96 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 overflow-auto">{{ output }}</pre>
                <button
                    type="button"
                    onclick="navigator.clipboard.writeText(document.querySelector('pre').textContent)"
                    class="mt-4 px-4 py-2 bg-gray-600 text-white font-medium rounded-md hover:bg-gray-700 transition"
                >
                    Copy to Clipboard
                </button>
            {% else %}
                <div class="w-full h-96 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 flex items-center justify-center text-gray-500">
                    Output will appear here...
                </div>
            {% endif %}
        </div>
    </form>

    <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-md">
        <h2 class="text-lg font-semibold text-blue-900 mb-2">Format Expected</h2>
        <p class="text-sm text-blue-800 mb-3">Your patch notes should include:</p>
        <ul class="text-sm text-blue-800 list-disc list-inside space-y-1">
            <li>A title (patch version, update name, etc.)</li>
            <li>Category headers (## Bug Fixes, ## Balance, etc.)</li>
            <li>Changes as bullet points (-, *, â€¢, or numbered)</li>
            <li>Keywords like: buff, nerf, fix, rework, etc.</li>
        </ul>
    </div>
</div>
{% endblock %}
